# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура MVP

В проекте используется архитектурный подход MVP (Model-View-Presenter), обеспечивающий разделение обязанностей между компонентами:

- **Model** отвечает за загрузку данных через API, их хранение и обработку пользовательских данных.
- **View** занимается отображением интерфейса, взаимодействием с пользователем и передачей событий.
- **EventEmitter** выполняет роль Presenter'а, координируя взаимодействие между Model и View: он обрабатывает события, обновляет данные и управляет отображением. В данном проекте этот слой не был выделен отдельно и реализован в основном файле скрипта.

Такое разделение делает код более структурированным и поддерживаемым.

## Базовые классы

### Класс Api

**Методы:**

- `handleResponse` — обработчик ответа сервера
- `get` — принимает изменяющуюся часть url-адреса, возвращает ответ от сервера
- `post` — принимает изменяющуюся часть url-адреса и данные для отправки на сервер  
- `type ApiPostMethods = 'POST' | 'PUT' | 'DELETE'` — тип метода POST, PUT, DELETE

### Класс EventEmitter

Реализует паттерн «Observer/Наблюдатель» и обеспечивает работу событий. Позволяет устанавливать и снимать слушатели событий, вызывать обработчики при наступлении события.

**Методы:**

- `on` — для подписки на событие
- `off` — для отписки от события
- `emit` — уведомляет подписчиков о наступлении события
- `onAll` — для подписки на все события
- `offAll` — сбрасывает всех подписчиков
- `trigger` — генерирует событие с заданными аргументами. Позволяет передавать его как обработчик в другие классы без прямой зависимости от EventEmitter

## Описание классов Model

### Класс CartModel

**Методы:**

- `addProduct` - Добавление товара в корзину
- `removeProduct` - Удаление товара из корзины
- `clearCart` - Очистка корзины
- `isInCart` - Проверка, есть ли товар в корзине
- `getProducts` - Получение списка товаров в корзине
- `getTotal` - Получение общей суммы товаров в корзине
- `get count` - Получение количества товаров в корзине
- `validateCart` - Проверка корзины на предмет наличия цены у всей корзины

### Класс GalleryModel

**Методы:**

- `getItem` - Получение конкретного товара по id
- `getItems` - Получение списка товаров
- `addItem` - Добавление товара в галерею
- `addItems` - Добавление списка товаров в галерею

### Класс OrderModel

**Методы:**

- `fillOrder` - Заполнение заказа (тип оплаты и адрес)
- `addContacts` - Добавление контактной информации
- `clearOrder` - Очистка заказа
- `static validateAddress` - Проверка адреса на корректность
- `static validatePayment` - Проверка типа оплаты на корректность
- `static validateEmail` - Проверка email на корректность
- `static validatePhone` - Проверка телефона на корректность
- `static makeApiOrderObj` - Создание объекта для API с данными заказа

## Описание класса ProductApi

Этот класс предназначен для взаимодействия с API. Он предоставляет методы для получения и отправки данных. В нем примуствует поля класса Api(Dependency injection)

**Методы:**

- `getProducts` - Получение списка товаров из API
- `postOrder` - Отправка заказа на сервер

## Описание классов View

### Класс Card

**Методы:**

- `set id` - Установка id товара (не виден пользователю)
- `set image` - Установка изображения товара 
- `set title` - Установка названия товара
- `set category` - Установка категории товара
- `set price` - Установка цены товара

### Класс CartPrevew

**Методы:**

- `set id` - Установка id товара (не виден пользователю)
- `set image` - Установка изображения товара 
- `set title` - Установка названия товара
- `set category` - Установка категории товара
- `set price` - Установка цены товара
- `set description` - Установка описания товара
- `toggleButton` - Переключение кнопки добавления в корзину (активная / не активная)

### Класс FormContacts

**Методы:**
- `set email` - Установка email
- `set phone` - Установка телефона
- `set buttonState` - Установка состояния кнопки (активная / не активная)

### Класс FormOrder

**Методы:**

- `set payment` - Установка типа оплаты
- `set email` - Установка email
- `set buttonState` - Установка состояния кнопки (активная / не активная)

### Класс Modal

**Методы:**

- `set content` - Установка содержимого модального окна
- `open` - Открытие модального окна
- `close` - Закрытие модального окна

### Класс Page

**Методы:**

- `set gallery` - Установка галереи товаров
- `set cartTotal` - Установка общей суммы товаров в корзине

### Класс ShoppingCart

**Методы:**

- `set products` - Установка товаров в корзине
- `set total` - Установка общей суммы товаров в корзине
- `toggleButton` - Переключение кнопки добавления в корзину (активная / не активная)

### Класс ShoppingCartProduct

**Методы:**

- `static cleanIndex` - Очистка индекса товара в корзине
- `set id` - Установка id товара
- `set title` - Установка названия товара
- `set price` - Установка цены товара

### Класс Success

**Методы:**
- `set total` - Установка общей суммы товаров